{"version":3,"file":"src_app_injection_injection_module_ts.js","mappings":"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","sources":["./src/app/injection/injection.module.ts","./src/app/injection/injection.page.ts","./src/app/injection/injection.page.html","./src/app/services/injection.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Routes } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { HttpClientModule } from '@angular/common/http';\nimport { InjectionPage } from './injection.page';\nimport { InjectionService } from '../services/injection.service';\n\nconst routes: Routes = [{ path: '', component: InjectionPage }];\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, HttpClientModule, RouterModule.forChild(routes)],\n  declarations: [InjectionPage],\n  providers: [InjectionService]\n})\nexport class InjectionPageModule {}\n","import { Component, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport {\n  InjectionService,\n  JobStatusResponse,\n  TenantJobHistoryItem\n} from '../services/injection.service';\n\n@Component({\n  selector: 'app-injection',\n  templateUrl: './injection.page.html',\n  styleUrls: ['./injection.page.scss']\n})\nexport class InjectionPage implements OnDestroy {\n  tenantId = '';\n  customerPath = 'CustomerA';\n\n  folderFiles: File[] = [];\n  docxFile: File | null = null;\n\n  jobId = '';\n  currentStatus = '';\n  progress: string[] = [];\n  errorMessage = '';\n\n  summary: Record<string, unknown> | null = null;\n  uploadedHistory: TenantJobHistoryItem[] = [];\n\n  isSubmitting = false;\n  private pollTimer: ReturnType<typeof setTimeout> | null = null;\n  private activeSubscription: Subscription | null = null;\n\n  constructor(private injectionService: InjectionService) {}\n\n  ngOnDestroy(): void {\n    this.stopPolling();\n    if (this.activeSubscription) {\n      this.activeSubscription.unsubscribe();\n    }\n  }\n\n  onFolderChange(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    this.folderFiles = input.files ? Array.from(input.files) : [];\n  }\n\n  onDocxFileChange(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    this.docxFile = input.files && input.files.length ? input.files[0] : null;\n  }\n\n  uploadFolder(): void {\n    if (!this.tenantId.trim() || this.folderFiles.length === 0) {\n      this.errorMessage = 'Tenant ID and folder files are required.';\n      return;\n    }\n\n    this.resetRunState();\n    this.isSubmitting = true;\n    this.activeSubscription = this.injectionService.uploadFolderDocs({\n      tenantId: this.tenantId.trim(),\n      files: this.folderFiles\n    }).subscribe({\n      next: (res) => {\n        this.isSubmitting = false;\n        this.jobId = res.job_id;\n        this.currentStatus = res.status;\n        this.progress = ['Upload request accepted'];\n        this.fetchHistory();\n        this.startPolling();\n      },\n      error: (err) => {\n        this.isSubmitting = false;\n        this.errorMessage = err?.error?.detail || 'Folder upload failed.';\n      }\n    });\n  }\n\n  uploadDocx(): void {\n    if (!this.tenantId.trim() || !this.docxFile) {\n      this.errorMessage = 'Tenant ID and DOCX file are required.';\n      return;\n    }\n\n    this.resetRunState();\n    this.isSubmitting = true;\n    this.activeSubscription = this.injectionService.uploadSingleDocx({\n      tenantId: this.tenantId.trim(),\n      customerPath: this.customerPath.trim() || 'default',\n      file: this.docxFile\n    }).subscribe({\n      next: (res) => {\n        this.isSubmitting = false;\n        this.jobId = res.job_id;\n        this.currentStatus = res.status;\n        this.progress = ['DOCX upload accepted'];\n        this.fetchHistory();\n        this.startPolling();\n      },\n      error: (err) => {\n        this.isSubmitting = false;\n        this.errorMessage = err?.error?.detail || 'DOCX upload failed.';\n      }\n    });\n  }\n\n  fetchHistory(): void {\n    if (!this.tenantId.trim()) {\n      this.errorMessage = 'Tenant ID is required.';\n      return;\n    }\n    this.activeSubscription = this.injectionService.getTenantJobs(this.tenantId.trim(), 50).subscribe({\n      next: (res) => {\n        this.uploadedHistory = res.jobs || [];\n      },\n      error: (err) => {\n        this.errorMessage = err?.error?.detail || 'Failed to load upload history.';\n      }\n    });\n  }\n\n  private startPolling(): void {\n    this.stopPolling();\n    if (!this.jobId) return;\n\n    this.pollTimer = setTimeout(() => this.pollJobStatus(), 1000);\n  }\n\n  private pollJobStatus(): void {\n    if (!this.jobId) return;\n\n    this.activeSubscription = this.injectionService.getJobStatus(this.jobId).subscribe({\n      next: (status: JobStatusResponse) => {\n        this.currentStatus = status.status;\n        this.progress = status.progress || [];\n\n        if (status.status === 'completed') {\n          this.stopPolling();\n          this.fetchSummary();\n          this.fetchHistory();\n          return;\n        }\n\n        if (status.status === 'failed') {\n          this.stopPolling();\n          this.errorMessage = status.error || 'Learning job failed.';\n          this.fetchHistory();\n          return;\n        }\n\n        this.pollTimer = setTimeout(() => this.pollJobStatus(), 2000);\n      },\n      error: (err) => {\n        this.stopPolling();\n        this.errorMessage = err?.error?.detail || 'Job polling failed.';\n      }\n    });\n  }\n\n  private fetchSummary(): void {\n    this.activeSubscription = this.injectionService.getJobSummary(this.jobId).subscribe({\n      next: (res) => {\n        this.summary = res;\n      },\n      error: (err) => {\n        this.errorMessage = err?.error?.detail || 'Failed to fetch summary.';\n      }\n    });\n  }\n\n  private stopPolling(): void {\n    if (this.pollTimer) {\n      clearTimeout(this.pollTimer);\n      this.pollTimer = null;\n    }\n  }\n\n  private resetRunState(): void {\n    this.stopPolling();\n    this.errorMessage = '';\n    this.summary = null;\n    this.jobId = '';\n    this.currentStatus = '';\n    this.progress = [];\n  }\n\n  statusClass(status: string): string {\n    if (status === 'completed') return 'ok';\n    if (status === 'failed') return 'fail';\n    if (status === 'processing') return 'run';\n    return 'wait';\n  }\n\n  summaryNumber(key: string): number {\n    if (!this.summary) return 0;\n    const value = this.summary[key];\n    return typeof value === 'number' ? value : 0;\n  }\n\n  summaryTypes(): string[] {\n    if (!this.summary) return [];\n    const value = this.summary['contract_types_found'];\n    return Array.isArray(value) ? value.map((x) => String(x)) : [];\n  }\n}\n","<div class=\"roles-content\">\n  <div class=\"setup-page roles-page injection-page\">\n    <section class=\"roles-hero card\">\n      <div class=\"roles-hero__copy\">\n        <p class=\"hero-kicker\">Injection Service</p>\n        <h1 class=\"page-title\">Document Upload Center</h1>\n        <p class=\"page-subtitle\">\n          Upload folders or single DOCX files to train tenant corpus with version continuity.\n        </p>\n      </div>\n      <div class=\"roles-hero__stats\">\n        <div class=\"stat-box\">\n          <span>Current State</span>\n          <strong>{{ currentStatus || 'idle' }}</strong>\n        </div>\n        <div class=\"stat-box\">\n          <span>Selected Files</span>\n          <strong>{{ folderFiles.length + (docxFile ? 1 : 0) }}</strong>\n        </div>\n        <div class=\"stat-box\">\n          <span>History Rows</span>\n          <strong>{{ uploadedHistory.length }}</strong>\n        </div>\n      </div>\n    </section>\n\n    <section class=\"workspace-grid\">\n      <div class=\"left-zone\">\n        <article class=\"card roles-table-card upload-card\">\n          <div class=\"section-head\">\n            <h3>Upload Queue</h3>\n            <button class=\"btn-outline\" (click)=\"fetchHistory()\">Refresh History</button>\n          </div>\n\n          <label>\n            Tenant ID\n            <input class=\"form-control\" type=\"text\" [(ngModel)]=\"tenantId\" placeholder=\"acme\" />\n          </label>\n\n          <div class=\"upload-grid\">\n            <div class=\"upload-block\">\n              <h4>Folder Upload</h4>\n              <p class=\"muted\">Choose a folder with nested customer/subfolder DOCX files.</p>\n              <input class=\"form-control\" type=\"file\" multiple webkitdirectory directory (change)=\"onFolderChange($event)\" />\n              <p class=\"file-meta\" *ngIf=\"folderFiles.length\">{{ folderFiles.length }} files selected</p>\n              <button class=\"btn-primary\" (click)=\"uploadFolder()\" [disabled]=\"isSubmitting\">Start Folder Learning</button>\n            </div>\n\n            <div class=\"upload-block\">\n              <h4>Single DOCX</h4>\n              <p class=\"muted\">Upload one contract and map it to a customer path.</p>\n              <label>\n                Customer Path\n                <input class=\"form-control\" type=\"text\" [(ngModel)]=\"customerPath\" placeholder=\"CustomerA/subfolder\" />\n              </label>\n              <input class=\"form-control\" type=\"file\" accept=\".docx\" (change)=\"onDocxFileChange($event)\" />\n              <p class=\"file-meta\" *ngIf=\"docxFile\">{{ docxFile.name }}</p>\n              <button class=\"btn-primary\" (click)=\"uploadDocx()\" [disabled]=\"isSubmitting\">Start DOCX Learning</button>\n            </div>\n          </div>\n        </article>\n\n        <article class=\"card roles-table-card job-card\" *ngIf=\"jobId\">\n          <div class=\"job-head\">\n            <h3>Learning Timeline</h3>\n            <span class=\"status-chip\" [ngClass]=\"statusClass(currentStatus)\">{{ currentStatus || 'queued' }}</span>\n          </div>\n          <p class=\"job-id\">Job ID: {{ jobId }}</p>\n          <ul class=\"progress-list\">\n            <li *ngFor=\"let item of progress\">{{ item }}</li>\n          </ul>\n        </article>\n\n        <article class=\"card roles-table-card summary-card\" *ngIf=\"summary\">\n          <h3>Learning Summary</h3>\n          <div class=\"metric-grid\">\n            <div class=\"metric-box\">\n              <span>Customers</span>\n              <strong>{{ summaryNumber('customers_analyzed') }}</strong>\n            </div>\n            <div class=\"metric-box\">\n              <span>Documents</span>\n              <strong>{{ summaryNumber('total_documents') }}</strong>\n            </div>\n            <div class=\"metric-box\">\n              <span>Chunks Added</span>\n              <strong>{{ summaryNumber('total_chunks_added') }}</strong>\n            </div>\n            <div class=\"metric-box\">\n              <span>Sequences</span>\n              <strong>{{ summaryNumber('negotiation_sequences') }}</strong>\n            </div>\n          </div>\n          <div class=\"contract-types\" *ngIf=\"summaryTypes().length\">\n            <span class=\"types-label\">Agreement Types Learned</span>\n            <div class=\"type-list\">\n              <span class=\"type-chip\" *ngFor=\"let type of summaryTypes()\">{{ type }}</span>\n            </div>\n          </div>\n        </article>\n      </div>\n\n      <aside class=\"right-zone\">\n        <article class=\"card roles-table-card history-card\">\n          <h3>Upload History</h3>\n          <p class=\"muted\" *ngIf=\"!uploadedHistory.length\">No uploads yet for this tenant.</p>\n          <div class=\"history-list\" *ngIf=\"uploadedHistory.length\">\n            <article class=\"history-item\" *ngFor=\"let item of uploadedHistory\">\n              <div class=\"history-top\">\n                <strong>{{ item.corpus_version || 'auto-version' }}</strong>\n                <span class=\"status-chip\" [ngClass]=\"statusClass(item.status)\">{{ item.status }}</span>\n              </div>\n              <p class=\"history-meta\">Job: {{ item.job_id }}</p>\n              <p class=\"history-meta\">Created: {{ item.created_at | date:'medium' }}</p>\n              <p class=\"history-meta\">Updated: {{ item.updated_at | date:'medium' }}</p>\n              <p class=\"history-meta\">Steps: {{ item.progress_count }}</p>\n              <p class=\"history-error\" *ngIf=\"item.error\">{{ item.error }}</p>\n            </article>\n          </div>\n        </article>\n      </aside>\n    </section>\n\n    <div class=\"card notice error\" *ngIf=\"errorMessage\">{{ errorMessage }}</div>\n  </div>\n</div>\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../environments/environment';\n\nexport interface LearningJobResponse {\n  job_id: string;\n  tenant_id: string;\n  status: string;\n  created_at: string;\n}\n\nexport interface JobStatusResponse {\n  job_id: string;\n  tenant_id: string;\n  status: string;\n  created_at: string;\n  updated_at: string;\n  progress: string[];\n  error?: string | null;\n}\n\nexport interface RetrievalRequest {\n  tenant_id: string;\n  query: string;\n  top_k: number;\n  contract_type?: string;\n  version_mode: 'latest' | 'all';\n}\n\nexport interface RetrievalResponse {\n  total: number;\n  results: Array<Record<string, unknown>>;\n}\n\nexport interface TenantJobHistoryItem {\n  job_id: string;\n  tenant_id: string;\n  status: string;\n  created_at: string;\n  updated_at: string;\n  corpus_version?: string;\n  error?: string | null;\n  progress_count: number;\n}\n\nexport interface TenantJobHistoryResponse {\n  tenant_id: string;\n  total: number;\n  jobs: TenantJobHistoryItem[];\n}\n\n@Injectable()\nexport class InjectionService {\n  private readonly baseUrl = environment.injectionServiceApiUrl || 'http://localhost:8001';\n\n  constructor(private http: HttpClient) {}\n\n  uploadCorpusZip(payload: {\n    tenantId: string;\n    file: File;\n    corpusVersion?: string;\n    lmStudioUrl?: string;\n    modelName?: string;\n  }): Observable<LearningJobResponse> {\n    const formData = new FormData();\n    formData.append('tenant_id', payload.tenantId);\n    formData.append('corpus_zip', payload.file);\n    if (payload.corpusVersion) formData.append('corpus_version', payload.corpusVersion);\n    if (payload.lmStudioUrl) formData.append('lm_studio_url', payload.lmStudioUrl);\n    if (payload.modelName) formData.append('model_name', payload.modelName);\n    return this.http.post<LearningJobResponse>(`${this.baseUrl}/corpus/upload`, formData);\n  }\n\n  uploadSingleDocx(payload: {\n    tenantId: string;\n    customerPath: string;\n    file: File;\n    corpusVersion?: string;\n    lmStudioUrl?: string;\n    modelName?: string;\n  }): Observable<LearningJobResponse> {\n    const formData = new FormData();\n    formData.append('tenant_id', payload.tenantId);\n    formData.append('customer_path', payload.customerPath);\n    formData.append('docx_file', payload.file);\n    if (payload.corpusVersion) formData.append('corpus_version', payload.corpusVersion);\n    if (payload.lmStudioUrl) formData.append('lm_studio_url', payload.lmStudioUrl);\n    if (payload.modelName) formData.append('model_name', payload.modelName);\n    return this.http.post<LearningJobResponse>(`${this.baseUrl}/corpus/upload-docx`, formData);\n  }\n\n  uploadFolderDocs(payload: {\n    tenantId: string;\n    files: File[];\n    corpusVersion?: string;\n    lmStudioUrl?: string;\n    modelName?: string;\n  }): Observable<LearningJobResponse> {\n    const formData = new FormData();\n    formData.append('tenant_id', payload.tenantId);\n    const relativePaths: string[] = [];\n\n    payload.files.forEach((file) => {\n      const fileWithPath = file as File & { webkitRelativePath?: string };\n      relativePaths.push(fileWithPath.webkitRelativePath || file.name);\n      formData.append('files', file, file.name);\n    });\n    formData.append('relative_paths', JSON.stringify(relativePaths));\n\n    if (payload.corpusVersion) formData.append('corpus_version', payload.corpusVersion);\n    if (payload.lmStudioUrl) formData.append('lm_studio_url', payload.lmStudioUrl);\n    if (payload.modelName) formData.append('model_name', payload.modelName);\n\n    return this.http.post<LearningJobResponse>(`${this.baseUrl}/corpus/upload-folder`, formData);\n  }\n\n  getJobStatus(jobId: string): Observable<JobStatusResponse> {\n    return this.http.get<JobStatusResponse>(`${this.baseUrl}/jobs/${jobId}`);\n  }\n\n  getJobSummary(jobId: string): Observable<Record<string, unknown>> {\n    return this.http.get<Record<string, unknown>>(`${this.baseUrl}/jobs/${jobId}/summary`);\n  }\n\n  retrieve(payload: RetrievalRequest): Observable<RetrievalResponse> {\n    return this.http.post<RetrievalResponse>(`${this.baseUrl}/rag/retrieve`, payload);\n  }\n\n  getTenantVersions(tenantId: string): Observable<Record<string, unknown>> {\n    return this.http.get<Record<string, unknown>>(`${this.baseUrl}/tenant/${tenantId}/versions`);\n  }\n\n  getTenantJobs(tenantId: string, limit = 50): Observable<TenantJobHistoryResponse> {\n    return this.http.get<TenantJobHistoryResponse>(`${this.baseUrl}/tenant/${tenantId}/jobs?limit=${limit}`);\n  }\n}\n"],"names":["CommonModule","FormsModule","RouterModule","IonicModule","HttpClientModule","InjectionPage","InjectionService","routes","path","component","InjectionPageModule","imports","forChild","declarations","i1","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","folderFiles","length","ɵɵtextInterpolate","docxFile","name","item_r2","ɵɵtemplate","InjectionPage_article_59_li_9_Template","ɵɵproperty","statusClass","currentStatus","jobId","progress","type_r3","InjectionPage_article_60_div_24_span_4_Template","summaryTypes","InjectionPage_article_60_div_24_Template","summaryNumber","item_r4","error","InjectionPage_div_66_article_1_p_16_Template","corpus_version","status","job_id","ɵɵpipeBind2","created_at","updated_at","progress_count","InjectionPage_div_66_article_1_Template","uploadedHistory","errorMessage","constructor","injectionService","tenantId","customerPath","summary","isSubmitting","pollTimer","activeSubscription","ngOnDestroy","stopPolling","unsubscribe","onFolderChange","event","input","target","files","Array","from","onDocxFileChange","uploadFolder","trim","resetRunState","uploadFolderDocs","subscribe","next","res","fetchHistory","startPolling","err","detail","uploadDocx","uploadSingleDocx","file","getTenantJobs","jobs","setTimeout","pollJobStatus","getJobStatus","fetchSummary","getJobSummary","clearTimeout","key","value","isArray","map","x","String","ɵɵdirectiveInject","selectors","decls","vars","consts","template","InjectionPage_Template","rf","ctx","ɵɵlistener","InjectionPage_Template_button_click_32_listener","ɵɵtwoWayListener","InjectionPage_Template_input_ngModelChange_36_listener","$event","ɵɵtwoWayBindingSet","InjectionPage_Template_input_change_43_listener","InjectionPage_p_44_Template","InjectionPage_Template_button_click_45_listener","InjectionPage_Template_input_ngModelChange_54_listener","InjectionPage_Template_input_change_55_listener","InjectionPage_p_56_Template","InjectionPage_Template_button_click_57_listener","InjectionPage_article_59_Template","InjectionPage_article_60_Template","InjectionPage_p_65_Template","InjectionPage_div_66_Template","InjectionPage_div_67_Template","ɵɵtwoWayProperty","environment","http","baseUrl","injectionServiceApiUrl","uploadCorpusZip","payload","formData","FormData","append","corpusVersion","lmStudioUrl","modelName","post","relativePaths","forEach","fileWithPath","push","webkitRelativePath","JSON","stringify","get","retrieve","getTenantVersions","limit","ɵɵinject","HttpClient","factory","ɵfac"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}